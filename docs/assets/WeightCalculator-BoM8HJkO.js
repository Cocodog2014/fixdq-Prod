import{j as e}from"./index-BGXccC9E.js";import{r as i}from"./router-DP1sdCM0.js";import"./react-gH-7aFTg.js";const o={singleAxle:2e4,tandemAxle:34e3,gross:8e4};function $(x,n){if(!isFinite(x)||x<=0||!Number.isFinite(n)||n<2)return null;const m=500*(x*n/(n-1)+12*n+36);return Math.floor(m/500)*500}const O={"5-axle semi":{axles:5,spacings:[12,4,33,4],weights:[12e3,17e3,17e3,1e4,1e4],length:{ft:72,in:0},width:8.5},"7-axle":{axles:7,spacings:[12,4,10,10,10,4],weights:[12e3,16e3,16e3,9e3,9e3,9e3,9e3],length:{ft:80,in:0},width:8.5},"10-axle":{axles:10,spacings:[12,4,8,8,8,8,8,8,4],weights:[12e3,15e3,15e3,9e3,9e3,9e3,9e3,9e3,9e3,9e3],length:{ft:95,in:0},width:8.5}};function D({onClose:x}){const[n,m]=i.useState(5),[W,L]=i.useState(""),[c,u]=i.useState([12,4,33,4].map(s=>({ft:s,in:0}))),[r,j]=i.useState([12e3,17e3,17e3,1e4,1e4]),[N,p]=i.useState({ft:72,in:0}),[E,w]=i.useState(8.5);i.useEffect(()=>{const s=Math.max(1,n-1);u(l=>{const t=l.slice(0,s);for(;t.length<s;)t.push({ft:10,in:0});return t}),j(l=>{const t=l.slice(0,n);for(;t.length<n;)t.push(0);return t})},[n]);const M=s=>{const l=O[s];l&&(L(s),m(l.axles),u(l.spacings.map(t=>({ft:t,in:0}))),j(l.weights),p(l.length),w(l.width))},v=i.useMemo(()=>{const s=[0];for(let l=0;l<c.length;l++){const t=(Number(c[l]?.ft)||0)+(Number(c[l]?.in)||0)/12;s.push((s[l]||0)+t)}return s},[c]),f=i.useMemo(()=>r.reduce((s,l)=>s+(Number(l)||0),0),[r]),k=s=>{const l=s+1,t=s+2,a=d=>d===1?"Steer":d===2?"Drive 1":d===3?"Drive 2":`Axle ${d}`;return`${a(l)} → ${a(t)} (ft/in)`},b=i.useMemo(()=>{const s=[];for(let l=0;l<n;l++)for(let t=l+1;t<n;t++){const a=t-l+1,d=v[t]-v[l],g=$(d,a),C=r.slice(l,t+1).reduce((P,T)=>P+(Number(T)||0),0);s.push({i:l+1,j:t+1,N:a,L:d,W:g,actual:C,pass:g?C<=g:!1})}return s},[n,v,r]),A=i.useMemo(()=>{const s=[];for(let l=0;l<n-1;l++){const t=Math.round((Number(c[l]?.ft)||0)*12+(Number(c[l]?.in)||0)),a=(Number(r[l])||0)+(Number(r[l+1])||0),d=t>40&&t<=96;s.push({a1:l+1,a2:l+2,inches:t,actual:a,limit:d?o.tandemAxle:null,pass:d?a<=o.tandemAxle:null})}return s},[c,r,n]),S=r.map(s=>({actual:Number(s)||0,limit:o.singleAxle})),G=b.find(s=>s.i===1&&s.j===n),y=S.every(s=>s.actual<=s.limit)&&A.every(s=>s.pass!==!1)&&b.every(s=>s.pass)&&f<=o.gross,h=s=>s??s===0?s.toLocaleString():"—";return e.jsxs("section",{className:"wc-wrap","aria-label":"Advanced axle & bridge weight calculator",children:[x&&e.jsx("button",{type:"button",className:"wc-close","aria-label":"Close weight calculator",onClick:x,children:"✕"}),e.jsxs("header",{className:"wc-header",children:[e.jsxs("div",{className:"wc-title",children:[e.jsx("span",{className:"wc-dot","aria-hidden":!0}),e.jsx("h2",{children:"Advanced Axle Group & Bridge Calculator"})]}),e.jsx("p",{className:"wc-sub",children:"Select axle count or a preset, then enter spacings and weights. Checks single axles, tandems, all groups, and GVW."})]}),e.jsxs("div",{className:"wc-controls",children:[e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Preset"}),e.jsxs("select",{value:W,onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"",children:"— none —"}),Object.keys(O).map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Number of axles"}),e.jsx("select",{value:n,onChange:s=>m(Math.min(12,Math.max(2,Number(s.target.value)))),children:Array.from({length:11},(s,l)=>l+2).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Overall length (ft)"}),e.jsx("input",{type:"number",min:0,step:1,value:N.ft,onChange:s=>p(l=>({...l,ft:Number(s.target.value)||0}))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Overall length (in)"}),e.jsx("input",{type:"number",min:0,max:11,step:1,value:N.in,onChange:s=>p(l=>({...l,in:Number(s.target.value)||0}))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Load width (ft)"}),e.jsx("input",{type:"number",min:0,step:.1,value:E,onChange:s=>w(Number(s.target.value)||0)})]})]}),e.jsxs("div",{className:"wc-section",children:[e.jsx("div",{className:"wc-h3",children:"Measure between axles (center → next)"}),e.jsx("div",{className:"wc-grid-3",children:c.map((s,l)=>e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:k(l)}),e.jsxs("div",{className:"wc-duo",children:[e.jsx("input",{type:"number",min:0,step:1,value:s.ft,onChange:t=>{const a=[...c];a[l]={...a[l],ft:Number(t.target.value)||0},u(a)}}),e.jsx("input",{type:"number",min:0,max:11,step:1,value:s.in,onChange:t=>{const a=[...c];a[l]={...a[l],in:Number(t.target.value)||0},u(a)}})]})]},l))})]}),e.jsxs("div",{className:"wc-section",children:[e.jsx("div",{className:"wc-h3",children:"Per-axle weights (lb)"}),e.jsx("div",{className:"wc-grid-5",children:r.map((s,l)=>e.jsxs("div",{className:"ctrl",children:[e.jsxs("label",{children:["Axle ",l+1]}),e.jsx("input",{type:"number",min:0,step:100,value:s,onChange:t=>{const a=[...r];a[l]=Number(t.target.value)||0,j(a)}})]},l))})]}),e.jsxs("div",{className:"wc-kpis",children:[e.jsxs("div",{className:"k",children:[e.jsx("div",{className:"small",children:"GVW"}),e.jsxs("div",{className:"v",children:[h(f)," lb"]})]}),e.jsxs("div",{className:"k",children:[e.jsx("div",{className:"small",children:"GVW Limit"}),e.jsxs("div",{className:"v",children:[h(o.gross)," lb"]})]}),e.jsxs("div",{className:"k",children:[e.jsxs("div",{className:"small",children:["Outer Group W (1→",n,")"]}),e.jsxs("div",{className:"v",children:[h(G?.W)," lb"]})]}),e.jsx("div",{className:`badge ${y?"ok":"warn"}`,children:y?"Overall: PASS":"Overall: ATTENTION"})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:"Single-Axle Checks"}),e.jsx("div",{className:"wc-table-wrap",children:e.jsxs("table",{className:"wc-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Axle"}),e.jsx("th",{children:"Weight"}),e.jsx("th",{children:"Limit"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:S.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsxs("td",{children:[h(s.actual)," lb"]}),e.jsxs("td",{children:[h(s.limit)," lb"]}),e.jsx("td",{children:e.jsx("span",{className:`pill ${s.actual<=s.limit?"ok":"bad"}`,children:s.actual<=s.limit?"OK":"OVER"})})]},l))})]})})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:'Tandem Checks (40"–96")'}),e.jsx("div",{className:"wc-table-wrap",children:e.jsxs("table",{className:"wc-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Pair"}),e.jsx("th",{children:"Spacing (in)"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Limit"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:A.map((s,l)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[s.a1,"–",s.a2]}),e.jsx("td",{children:s.inches}),e.jsxs("td",{children:[h(s.actual)," lb"]}),e.jsx("td",{children:s.limit?h(s.limit)+" lb":"n/a"}),e.jsx("td",{children:e.jsx("span",{className:`pill ${s.limit===null?"na":s.pass?"ok":"bad"}`,children:s.limit===null?"n/a":s.pass?"OK":"OVER"})})]},l))})]})})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:"Bridge Formula – All Consecutive Groups"}),e.jsx("div",{className:"wc-table-wrap",children:e.jsxs("table",{className:"wc-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Group"}),e.jsx("th",{children:"N"}),e.jsx("th",{children:"L (ft)"}),e.jsx("th",{children:"W (limit)"}),e.jsx("th",{children:"Actual"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:b.map((s,l)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[s.i,"→",s.j]}),e.jsx("td",{children:s.N}),e.jsx("td",{children:s.L.toFixed(2)}),e.jsxs("td",{children:[h(s.W)," lb"]}),e.jsxs("td",{children:[h(s.actual)," lb"]}),e.jsx("td",{children:e.jsx("span",{className:`pill ${s.pass?"ok":"bad"}`,children:s.pass?"OK":"OVER"})})]},l))})]})})]}),e.jsxs("p",{className:"wc-note",children:[e.jsx("strong",{children:"Note:"})," This tool aids planning. Always verify posted limits, permits, and state statutes. Oversize/overweight loads may require escorts, signage, and route approvals."]})]})}export{D as default};
