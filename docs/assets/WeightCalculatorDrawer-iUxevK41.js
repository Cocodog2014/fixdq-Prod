const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WeightCalculator-NUY1LNdn.js","assets/index-Iai-yUTS.js","assets/router-DP1sdCM0.js","assets/react-gH-7aFTg.js","assets/index-B-vYNKup.css"])))=>i.map(i=>d[i]);
import{j as n,_ as b}from"./index-Iai-yUTS.js";import{r as e}from"./router-DP1sdCM0.js";import"./react-gH-7aFTg.js";const x=e.lazy(()=>b(()=>import("./WeightCalculator-NUY1LNdn.js"),__vite__mapDeps([0,1,2,3,4]))),_=e.forwardRef(function(g,m){const[s,u]=e.useState(!1),d=e.useRef(null),i=e.useRef(null),f=e.useRef(null),o=e.useCallback(()=>u(!1),[]),h=e.useCallback(()=>u(!0),[]);e.useImperativeHandle(m,()=>({open:h,close:o})),e.useEffect(()=>{if(!s)return;f.current=document.activeElement;const t=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t,f.current?.focus?.()}},[s]),e.useEffect(()=>{if(!s)return;const t=r=>{if(r.key==="Escape"&&(r.preventDefault(),o()),r.key==="Tab"){const l=i.current;if(!l)return;const a=l.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),c=Array.from(a).filter(y=>!y.hasAttribute("disabled"));if(!c.length)return;const v=c[0],w=c[c.length-1];r.shiftKey&&document.activeElement===v?(r.preventDefault(),w.focus()):!r.shiftKey&&document.activeElement===w&&(r.preventDefault(),v.focus())}};return window.addEventListener("keydown",t),setTimeout(()=>{i.current?.querySelector("button, input, select")?.focus()},0),()=>window.removeEventListener("keydown",t)},[s,o]);const p=t=>{t.target===d.current&&o()};return e.useEffect(()=>{if(!s)return;let t=null;const r=a=>{t=a.touches?.[0]?.clientY??null},l=a=>{if(t==null)return;(a.touches?.[0]?.clientY??0)-t>80&&(o(),t=null)};return window.addEventListener("touchstart",r,{passive:!0}),window.addEventListener("touchmove",l,{passive:!0}),()=>{window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",l)}},[s,o]),s?n.jsx("div",{className:"wc-overlay",ref:d,onMouseDown:p,role:"presentation",children:n.jsxs("div",{className:"wc-drawer",role:"dialog","aria-modal":"true","aria-label":"Bridge & Axle Weight Planner",ref:i,children:[n.jsxs("header",{className:"wc-drawer-head",children:[n.jsx("h2",{children:"Bridge & Axle Weight Planner"}),n.jsx("button",{type:"button",className:"wc-close-btn",onClick:o,"aria-label":"Close weight planner",children:"Close"})]}),n.jsx("div",{className:"wc-drawer-body",children:n.jsx(e.Suspense,{fallback:n.jsx("div",{className:"sr-loading",children:"Loadingâ€¦"}),children:n.jsx(x,{onClose:o})})})]})}):null});export{_ as default};
