import{j as e}from"./index-Iai-yUTS.js";import{r as h}from"./router-DP1sdCM0.js";import"./react-gH-7aFTg.js";function X(M){const o=Number(M||0),g=Math.round(o%1*12);return`${Math.floor(o)}′ ${g}″`}function ee({spacings:M,segments:o,totalAxles:g}){const m=h.useMemo(()=>{const i=[0];for(let r=0;r<g-1;r++){const d=M[r],x=(Number(d?.ft)||0)+(Number(d?.in)||0)/12;i.push(i[r]+x)}return i},[M,g]),T=m.length?m[m.length-1]:0,j=h.useMemo(()=>{if(!o?.length)return[{label:"Combination",count:g,color:"#ffffff10"}];const i=[];let r=0;for(const d of o){if(r>=g)break;const x=g-r,C=Math.min(Math.max(0,d.count||0),x);i.push({label:d.label,count:C,color:d.color||"#ffffff10"}),r+=C}return i},[o,g]),F=960,u=240,f={l:40,r:20,t:34,b:60},c=F-f.l-f.r,w=u-f.b,A=T>0?c/T:12,$=8,p=i=>f.l+i*A,I=[];let N=0;return j.forEach(i=>{const r=N,d=N+i.count-1;I.push({...i,startIdx:r,endIdx:d}),N+=i.count}),e.jsxs("div",{className:"wc-axle-diagram","aria-label":"Axle spacing visual diagram",children:[e.jsxs("svg",{viewBox:`0 0 ${F} ${u}`,className:"wc-axle-svg",role:"img","aria-hidden":!1,children:[e.jsxs("defs",{children:[e.jsx("marker",{id:"wcArrowHead",markerWidth:"10",markerHeight:"8",refX:"9",refY:"4",orient:"auto",children:e.jsx("path",{d:"M0,0 L10,4 L0,8 z",fill:"currentColor"})}),e.jsx("marker",{id:"wcArrowTail",markerWidth:"10",markerHeight:"8",refX:"1",refY:"4",orient:"auto",children:e.jsx("path",{d:"M10,0 L0,4 L10,8 z",fill:"currentColor"})})]}),I.map((i,r)=>{if(i.startIdx>=m.length)return null;const d=p(m[i.startIdx])-10,x=p(m[Math.min(i.endIdx,m.length-1)])+10;return e.jsxs("g",{children:[e.jsx("rect",{x:d,y:f.t,width:Math.max(0,x-d),height:u-f.t-90,fill:i.color,rx:8}),e.jsx("text",{x:d+6,y:f.t-10,fontSize:"12",fill:"#cfe0ff",children:i.label})]},r)}),e.jsx("line",{x1:f.l-10,y1:w,x2:F-f.r+10,y2:w,stroke:"#ffffff30",strokeWidth:"2"}),m.map((i,r)=>e.jsxs("g",{children:[e.jsx("circle",{cx:p(i),cy:w,r:$,fill:"#ffd84d",stroke:"#0006"}),e.jsx("text",{x:p(i),y:w+24,textAnchor:"middle",fontSize:"12",fill:"#e6eefc",children:r+1})]},r)),m.slice(0,-1).map((i,r)=>{const d=m[r+1],x=(i+d)/2,C=w-28;return e.jsxs("g",{color:"#fff",children:[e.jsx("line",{x1:p(i),y1:C,x2:p(d),y2:C,stroke:"currentColor",strokeWidth:1.5,markerStart:"url(#wcArrowTail)",markerEnd:"url(#wcArrowHead)"}),e.jsx("text",{x:p(x),y:C-6,textAnchor:"middle",fontSize:"12",fill:"currentColor",children:X(d-i)})]},`dim-${r}`)}),T>0&&e.jsxs("g",{color:"#cbd5e1",children:[e.jsx("line",{x1:f.l,y1:w-74,x2:f.l+c,y2:w-74,stroke:"currentColor",strokeDasharray:"4 4",markerStart:"url(#wcArrowTail)",markerEnd:"url(#wcArrowHead)"}),e.jsxs("text",{x:f.l+c/2,y:w-84,textAnchor:"middle",fontSize:"12",fill:"#cfe0ff",children:["Overall axle span: ",X(T)]})]})]}),e.jsxs("div",{className:"wc-axle-legend",children:[e.jsx("span",{className:"wc-axle-dot"})," Axle centers • Spacings are center-to-center."]})]})}const E={singleAxle:2e4,tandemAxle:34e3,gross:8e4};function se(M,o){if(!isFinite(M)||M<=0||!Number.isFinite(o)||o<2)return null;const g=500*(M*o/(o-1)+12*o+36);return Math.floor(g/500)*500}function ne({onClose:M}){const[o,g]=h.useState(5),[m,T]=h.useState(null),[j,F]=h.useState(3),[u,f]=h.useState(2),[c,w]=h.useState(""),[A,$]=h.useState(2),[p,I]=h.useState(1),[N,i]=h.useState(1),[r,d]=h.useState([12,4,33,4].map(s=>({ft:s,in:0}))),[x,C]=h.useState([12e3,17e3,17e3,1e4,1e4]),[V,J]=h.useState({ft:72,in:0}),[R,H]=h.useState({ft:8,in:6});h.useEffect(()=>{const s=c==="jeep"?A:0,l=c==="booster"?p:0,n=c==="flip"?N:0;let a=j+s+u+l+n;if(a>12){if(l&&c==="booster"){const v=a-12,t=Math.max(0,l-v);t!==p&&I(t||1),a=j+s+u+(c==="booster"?t:0)+n}else if(n&&c==="flip"){const v=a-12,t=Math.max(0,n-v);t!==N&&i(t||1),a=j+s+u+l+(c==="flip"?t:0)}else if(s&&c==="jeep"){const v=a-12,t=Math.max(0,s-v);t!==A&&$(Math.max(2,t)||2),a=j+(c==="jeep"?t:0)+u+l+n}}a=Math.min(12,a),o!==a&&g(a);const b=Math.max(1,a-1);d(v=>{const t=v.slice(0,b);for(;t.length<b;)t.push({ft:10,in:0});if(j>=4&&u>0){const y=t[2];if(y&&Number(y.ft)>=20){const _={...y};t[2]={ft:4,in:0};const L=3,O=t[L];if(t[L]=_,O&&L+1<b){const S=L+1;t[S]&&Number(t[S].ft)===10&&Number(t[S].in)===0?t[S]=O:t[S]||(t[S]=O)}}else y&&Number(y.ft)===10&&Number(y.in)===0&&(t[2]={ft:4,in:0})}else j>=4&&t[2]&&Number(t[2].ft)===10&&Number(t[2].in)===0&&(t[2]={ft:4,in:0});if(u>1){const W=c==="jeep"?A:0,y=j+W-1,L=j+W+1-1,O=u-1;for(let S=0;S<O;S++){const B=L+S;if(B!==y&&B<t.length){const G=t[B];if(!G)continue;(Number(G.ft)===10&&Number(G.in)===0||Number(G.ft)>=20)&&(t[B]={ft:4,in:0})}}}return t}),C(v=>{const t=v.slice(0,a);for(;t.length<a;)t.push(0);return t})},[j,u,c,A,p,N,o]);const U=h.useMemo(()=>{const s=[0];for(let l=0;l<r.length;l++){const n=(Number(r[l]?.ft)||0)+(Number(r[l]?.in)||0)/12;s.push((s[l]||0)+n)}return s},[r]),P=h.useMemo(()=>x.reduce((s,l)=>s+(Number(l)||0),0),[x]),Q=h.useMemo(()=>{const s=[];return j&&s.push({label:"Unit 1 (Tractor)",count:j,color:"#5ab2ff18"}),c==="jeep"&&A&&s.push({label:"Jeep",count:A,color:"#34d39918"}),u&&s.push({label:"Unit 2 (Trailer)",count:u,color:"#ffd84d18"}),c==="booster"&&p&&s.push({label:"Booster",count:p,color:"#ff8ab718"}),c==="flip"&&N&&s.push({label:"Flip",count:N,color:"#c084fc18"}),s},[j,u,c,A,p,N]),q=s=>{const l=s+1,n=s+2;return l===1?"Steering to Axle 2 (ft/in)":`Axle ${l} to Axle ${n} (ft/in)`},z=h.useMemo(()=>{const s=[];for(let l=0;l<o;l++)for(let n=l+1;n<o;n++){const a=n-l+1,b=U[n]-U[l],v=se(b,a),t=x.slice(l,n+1).reduce((W,y)=>W+(Number(y)||0),0);s.push({i:l+1,j:n+1,N:a,L:b,W:v,actual:t,pass:v?t<=v:!1})}return s},[o,U,x]),D=h.useMemo(()=>{const s=[];for(let l=0;l<o-1;l++){const n=Math.round((Number(r[l]?.ft)||0)*12+(Number(r[l]?.in)||0)),a=(Number(x[l])||0)+(Number(x[l+1])||0),b=n>40&&n<=96;s.push({a1:l+1,a2:l+2,inches:n,actual:a,limit:b?E.tandemAxle:null,pass:b?a<=E.tandemAxle:null})}return s},[r,x,o]),K=x.map(s=>({actual:Number(s)||0,limit:E.singleAxle})),Z=z.find(s=>s.i===1&&s.j===o),Y=K.every(s=>s.actual<=s.limit)&&D.every(s=>s.pass!==!1)&&z.every(s=>s.pass)&&P<=E.gross,k=s=>s??s===0?s.toLocaleString():"—";return e.jsxs("section",{className:"wc-wrap","aria-label":"Advanced axle & bridge weight calculator",children:[e.jsxs("header",{className:"wc-header",children:[e.jsxs("div",{className:"wc-title",children:[e.jsx("span",{className:"wc-dot","aria-hidden":!0}),e.jsx("h2",{children:"Advanced Axle Group & Bridge Calculator"})]}),e.jsx("p",{className:"wc-sub",children:"Select axle count, then enter spacings and per-axle weights. Checks single axles, tandems, all groups, and GVW."})]}),e.jsxs("div",{className:"wc-controls",children:[(()=>{const s=1+(c==="jeep"?1:0)+(u>0?1:0)+(c==="booster"?1:0)+(c==="flip"?1:0),l=m===null?"auto":String(m);return e.jsxs("div",{className:"ctrl",children:[e.jsxs("label",{children:["Total units ",m===null&&e.jsx("span",{style:{fontWeight:400,fontSize:".7rem",marginLeft:4},children:"(auto)"})]}),e.jsxs("select",{"aria-label":"Total units (auto or override)",value:l,onChange:n=>{const a=n.target.value;if(a==="auto")T(null);else{const b=Number(a);b>=1&&b<=5&&T(b)}},children:[e.jsxs("option",{value:"auto",children:["Auto: ",s]}),[1,2,3,4,5].map(n=>e.jsx("option",{value:n,children:n},n))]})]})})(),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Unit 1 axles touching the ground"}),e.jsx("select",{value:j,onChange:s=>{const l=Math.min(5,Math.max(1,Number(s.target.value)));F(l)},children:Array.from({length:5},(s,l)=>l+1).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Unit 2 axles touching the ground"}),e.jsx("select",{value:u,onChange:s=>{const l=Math.min(5,Math.max(0,Number(s.target.value)));f(l)},children:Array.from({length:6},(s,l)=>l).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Total axles (auto)"}),e.jsx("input",{type:"number",value:o,disabled:!0,"aria-label":"Total axles automatically calculated"})]}),e.jsxs("div",{className:"full-row wc-inline-four",children:[e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Overall length (ft)"}),e.jsx("input",{type:"number",min:0,step:1,value:V.ft,onChange:s=>J(l=>({...l,ft:Number(s.target.value)||0}))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Overall length (in)"}),e.jsx("input",{type:"number",min:0,max:11,step:1,value:V.in,onChange:s=>J(l=>({...l,in:Number(s.target.value)||0}))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Load width (ft)"}),e.jsx("input",{type:"number",min:0,step:1,value:R.ft,onChange:s=>H(l=>({...l,ft:Number(s.target.value)||0}))})]}),e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:"Load width (in)"}),e.jsx("input",{type:"number",min:0,max:11,step:1,value:R.in,onChange:s=>H(l=>({...l,in:Number(s.target.value)||0}))})]})]}),e.jsxs("div",{className:"ctrl full-row wc-equip-select",children:[e.jsxs("label",{children:[e.jsxs("span",{className:"wc-equip-label",children:["Additional equipment ",e.jsx("span",{className:"wc-optional-tag","aria-hidden":!0,children:"optional"})," – ",e.jsx("span",{className:"wc-equip-examples",children:"dollies, boosters, flip axles"})]}),e.jsxs("select",{value:c,onChange:s=>w(s.target.value),"aria-label":"Additional equipment (optional): select jeep dolly, booster, or flip axle if used",children:[e.jsx("option",{value:"",children:"— none —"}),e.jsx("option",{value:"jeep",children:"Jeep dolly (2–3-axle dolly between tractor and lowboy to add front axles & spread weight)"}),e.jsx("option",{value:"booster",children:"Booster / Stinger"}),e.jsx("option",{value:"flip",children:"Flip axle / Flip booster"})]})]}),c==="jeep"&&e.jsxs("div",{className:"wc-jeep-config",children:[e.jsxs("label",{children:["Jeep dolly axles",e.jsx("select",{value:A,onChange:s=>$(Math.min(3,Math.max(2,Number(s.target.value)))),children:[2,3].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("p",{className:"wc-note-jeep",children:"Jeep dolly: a 2–3-axle dolly between the tractor and the lowboy to add axles up front and spread weight (no deck cargo)."})]}),c==="booster"&&e.jsxs("div",{className:"wc-jeep-config",children:[e.jsxs("label",{children:["Booster axles",e.jsx("select",{value:p,onChange:s=>I(Math.min(3,Math.max(1,Number(s.target.value)))),children:[1,2,3].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("p",{className:"wc-note-jeep",children:"Booster: 1–3 axle group attached to rear of trailer to add axles and lengthen group for Bridge Formula."})]}),c==="flip"&&e.jsxs("div",{className:"wc-jeep-config",children:[e.jsxs("label",{children:["Flip axle(s)",e.jsx("select",{value:N,onChange:s=>i(Math.min(2,Math.max(1,Number(s.target.value)))),children:[1,2].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("p",{className:"wc-note-jeep",children:"Flip axle: 1–2 axle add-on hinged at trailer rear; flips down to increase axle count when needed."})]})]})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:"Axle Diagram (live)"}),e.jsx(ee,{spacings:r,totalAxles:o,segments:Q})]}),e.jsxs("div",{className:"wc-section",children:[e.jsx("div",{className:"wc-h3",children:"Measure between axles (center of hub to center of hub)"}),e.jsx("div",{className:"wc-grid-3 wc-spacing-grid",children:r.map((s,l)=>e.jsxs("div",{className:"ctrl",children:[e.jsx("label",{children:q(l)}),e.jsxs("div",{className:"wc-duo",children:[e.jsx("input",{type:"number",min:0,step:1,value:s.ft,placeholder:"ft","aria-label":`${q(l)} feet`,onChange:n=>{const a=[...r];a[l]={...a[l],ft:Number(n.target.value)||0},d(a)}}),e.jsx("input",{type:"number",min:0,max:11,step:1,value:s.in,placeholder:"in","aria-label":`${q(l)} inches`,onChange:n=>{const a=[...r];a[l]={...a[l],in:Number(n.target.value)||0},d(a)}})]})]},l))})]}),e.jsxs("div",{className:"wc-section",children:[e.jsx("div",{className:"wc-h3",children:"Per-axle weights (lb)"}),e.jsx("div",{className:"wc-grid-5",children:x.map((s,l)=>e.jsxs("div",{className:"ctrl",children:[e.jsxs("label",{children:["Axle ",l+1]}),e.jsx("input",{type:"number",min:0,step:100,value:s,onChange:n=>{const a=[...x];a[l]=Number(n.target.value)||0,C(a)}})]},l))})]}),e.jsxs("div",{className:"wc-kpis",children:[e.jsxs("div",{className:"k",children:[e.jsx("div",{className:"small",children:"GVW"}),e.jsxs("div",{className:"v",children:[k(P)," lb"]})]}),e.jsxs("div",{className:"k",children:[e.jsx("div",{className:"small",children:"GVW Limit"}),e.jsxs("div",{className:"v",children:[k(E.gross)," lb"]})]}),e.jsxs("div",{className:"k",children:[e.jsxs("div",{className:"small",children:["Outer Group W (1→",o,")"]}),e.jsxs("div",{className:"v",children:[k(Z?.W)," lb"]})]}),e.jsx("div",{className:`badge ${Y?"ok":"warn"}`,children:Y?"Overall: PASS":"Overall: ATTENTION"})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:"Single-Axle Checks"}),e.jsx("div",{className:"wc-table-wrap",children:e.jsxs("table",{className:"wc-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Axle"}),e.jsx("th",{children:"Weight"}),e.jsx("th",{children:"Limit"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:K.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsxs("td",{children:[k(s.actual)," lb"]}),e.jsxs("td",{children:[k(s.limit)," lb"]}),e.jsx("td",{children:e.jsx("span",{className:`pill ${s.actual<=s.limit?"ok":"bad"}`,children:s.actual<=s.limit?"OK":"OVER"})})]},l))})]})})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:'Tandem Checks (40"–96")'}),e.jsx("div",{className:"wc-table-wrap",children:e.jsxs("table",{className:"wc-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Pair"}),e.jsx("th",{children:"Spacing (in)"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Limit"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:D.map((s,l)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[s.a1,"–",s.a2]}),e.jsx("td",{children:s.inches}),e.jsxs("td",{children:[k(s.actual)," lb"]}),e.jsx("td",{children:s.limit?k(s.limit)+" lb":"n/a"}),e.jsx("td",{children:e.jsx("span",{className:`pill ${s.limit===null?"na":s.pass?"ok":"bad"}`,children:s.limit===null?"n/a":s.pass?"OK":"OVER"})})]},l))})]})})]}),e.jsxs("div",{className:"wc-card",children:[e.jsx("h3",{children:"Bridge Formula – All Consecutive Groups"}),e.jsx("div",{className:"wc-table-wrap",children:e.jsxs("table",{className:"wc-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Group"}),e.jsx("th",{children:"N"}),e.jsx("th",{children:"L (ft)"}),e.jsx("th",{children:"W (limit)"}),e.jsx("th",{children:"Actual"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:z.map((s,l)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[s.i,"→",s.j]}),e.jsx("td",{children:s.N}),e.jsx("td",{children:s.L.toFixed(2)}),e.jsxs("td",{children:[k(s.W)," lb"]}),e.jsxs("td",{children:[k(s.actual)," lb"]}),e.jsx("td",{children:e.jsx("span",{className:`pill ${s.pass?"ok":"bad"}`,children:s.pass?"OK":"OVER"})})]},l))})]})})]}),e.jsxs("p",{className:"wc-note",children:[e.jsx("strong",{children:"Note:"})," This tool aids planning. Always verify posted limits, permits, and state statutes. Oversize/overweight loads may require escorts, signage, and route approvals."]})]})}export{ne as default};
